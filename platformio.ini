; Production-Ready ESP32 Firmware Project
; With WiFi Provisioning, OTA Updates, and Automatic Rollback

[env:esp32]
platform = espressif32
board = esp32doit-devkit1
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; WiFi and OTA libraries
lib_deps =
    WiFiManager@>=0.16.0
    ArduinoJson@>=6.21.0
    HTTPClient
    Update
    ESP_DoubleReset

; Build flags with version management
build_flags =
    -DFIRMWARE_VERSION="1.0.0"
    -DBUILD_NUMBER=1
    -DCORE_DEBUG_LEVEL=3
    -DENABLE_OTA=1
    -DENABLE_WIFI_MANAGER=1

; OTA partition scheme - Dual OTA for rollback safety
board_build.partitions = partitions_ota.csv

; Monitor filters
monitor_filters = 
    esp32_exception_decoder
    default

; Upload options for OTA
upload_protocol = espota
upload_port = 192.168.1.100
